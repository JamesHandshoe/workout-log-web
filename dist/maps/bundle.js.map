{"version":3,"sources":["app.js","feed.js","define.js","log.js","auth.js"],"names":["$","document","ready","WorkoutLog","undefined","API_BASE","location","hostname","setAuthHeader","sessionToken","window","localStorage","setItem","ajaxSetup","headers","Authorization","ajax","type","url","then","data","username","jQuery","on","e","token","getItem","this","hasClass","preventDefault","target","attr","log","setDefinitions","setHistory","setFeed","socket","io","connect","addFeedItem","extend","feed","feedData","li","append","message","addClass","push","sendChat","emit","val","len","length","feedLis","i","children","remove","fetchAllFeeds","fetchFeeds","header","done","fail","err","hide","definition","userDefinitions","create","def","desc","postData","define","JSON","stringify","contentType","fadeIn","console","delete","thisDefId","id","find","deleteData","deleteDefinition","text","splice","fetchAll","index","workouts","defs","opts","description","history","lis","result","itsLog","logger","thisLog","deleteLog","closest","fetchDefs","delegate","afterSignin","removeClass","signup","password","user","modal","tab","show","login","loginout","removeItem"],"mappings":"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","file":"bundle.js","sourcesContent":["$(document).ready(function(){\r\n\tvar WorkoutLog = (function($, undefined){\r\n\t\tvar API_BASE = location.hostname === \"localhost\" ?\r\n\t\t\t\"//localhost:3000/api/\" :\r\n\t\t\t\"//workoutapi-1150-jhandshoe.herokuapp.com/\";\r\n\r\n\t\tvar setAuthHeader = function(sessionToken){\r\n\r\n\t\t\twindow.localStorage.setItem(\"sessionToken\", sessionToken);\r\n\r\n\t\t\t$.ajaxSetup({\r\n\t\t\t\t\"headers\": {\r\n\t\t\t\t\t\"Authorization\": sessionToken\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: \"GET\",\r\n\t\t\t\turl: API_BASE + \"login\"\r\n\t\t\t}).then(function(data){\r\n\t\t\t\tWorkoutLog.username = data;\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tAPI_BASE: API_BASE,\r\n\t\t\tsetAuthHeader: setAuthHeader\r\n\t\t};\r\n\t})(jQuery);\r\n\r\n\t// ensure .disabled aren't clickable\r\n\r\n\t$('.nav-tabs a[data-toggle=tab]').on('click', function(e){\r\n\t\tvar token = window.localStorage.getItem('sessionToken');\r\n\t\tif ($(this).hasClass('disabled') && !token) {\r\n\t\t\te.preventDefault();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t});\r\n\r\n\t//bind tab change events\r\n\t$('a[data-toggle=tab]').on('shown.bs.tab', function(e) {\r\n\t\tvar target = $(e.target).attr(\"href\");\r\n\t\tif (target === \"#log\") {\r\n\t\t\tWorkoutLog.log.setDefinitions();\r\n\t\t}\r\n\r\n\t\tif (target === '#history') {\r\n\t\t\tWorkoutLog.log.setHistory();\r\n\t\t}\r\n\r\n\t\tif (target === \"#feed\") {\r\n\t\t\tWorkoutLog.setFeed();\r\n\t\t}\r\n\t});\r\n\r\n\r\n\r\n\tvar token = window.localStorage.getItem('sessionToken');\r\n\tif (token){\r\n\t\tWorkoutLog.setAuthHeader(token);\r\n\t}\r\n\r\n\twindow.WorkoutLog = WorkoutLog;\r\n\r\n\tWorkoutLog.socket = io.connect(\"http://localhost:3000\");\r\n\r\n\tWorkoutLog.socket.on(\"new log\", function(data){\r\n\t\tWorkoutLog.addFeedItem(data);\r\n\t});\r\n\r\n\tWorkoutLog.socket.on(\"chat-message\", function(data){\r\n\t\tWorkoutLog.addFeedItem(data);\r\n\t});\r\n});\r\n/*test api - put this back in to check if apis are working\r\n\t$('#testAPI').on('click', function(){\r\n\t\tconsole.log(\"its working\");\r\n\t\tvar test = $.ajax({\r\n\t\t\ttype: \"GET\",\r\n\t\t\turl: \"http://localhost:3000/api/test\"\r\n\t\t});\r\n\t\ttest.done(function(data){\r\n\t\t\tconsole.log(data);\r\n\t\t});\r\n\t\ttest.fail(function(){\r\n\t\t\tconsole.log(\"oh noes!!!\");\r\n\t\t});\r\n\t});\r\n*/\r\n","$(function(){\r\n\t$.extend(WorkoutLog, {\r\n\t\tfeed: [],\r\n\t\taddFeedItem: function(feedData){\r\n\t\t\tvar li = $('<li>').append(feedData.username + feedData.message);\r\n\t\t\tli.addClass('list-group-item');\r\n\t\t\t$('#feed-list').append(li);\r\n\t\t\tWorkoutLog.feed.push(feedData);\r\n\t\t},\r\n\r\n\t\tsendChat: function(){\r\n\t\t\tWorkoutLog.socket.emit(\"chat-message\", {\r\n\t\t\t\tusername: WorkoutLog.username,\r\n\t\t\t\tmessage: \" says \" + $('#msg').val()\r\n\t\t\t});\r\n\r\n\t\t\t$('#msg').val(\"\");\r\n\t\t},\r\n\r\n\t\tsetFeed: function() {\r\n\t\t\tvar feed = WorkoutLog.feed;\r\n\t\t\tvar len = feed.length;\r\n\t\t\tvar feedLis = \"\";\r\n\t\t\tfor(var i = 0; i < len; i++){\r\n\t\t\t\tfeedLis += \"<li class='list-group-item'>\" +\r\n\t\t\t\tfeed[i].username + feed[i].message +\r\n\t\t\t\t\"</li>\";\r\n\t\t\t}\r\n\t\t\t$('#feed-list').children().remove();\r\n\t\t\t$(\"#feed-list\").append(feedLis);\r\n\t\t},\r\n\r\n\t\tfetchAllFeeds: function(){\r\n\t\t\tvar fetchFeeds = $.ajax({\r\n\t\t\t\ttype: \"GET\",\r\n\t\t\t\turl: WorkoutLog.API_BASE + \"feed\",\r\n\t\t\t\theader: {\r\n\t\t\t\t\t\"Authorization\": window.localStorage.getItem(\"sessionToken\")\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfetchFeeds.done(function(data){\r\n\t\t\t\tWorkoutLog.feed = data;\r\n\t\t\t});\r\n\r\n\t\t\tfetchFeeds.fail(function(err){\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\t$(\"#msg-send\").on(\"click\", WorkoutLog.sendChat);\r\n\r\n\tif (window.localStorage.getItem(\"sessionToken\")){\r\n\t\tWorkoutLog.fetchAllFeeds();\r\n\t}\r\n});","$(function(){\r\n\t$('#define-success').hide();\r\n\t$('#define-fail').hide();\r\n\t$.extend(WorkoutLog,{\r\n\t\tdefinition: {\r\n\t\t\tuserDefinitions: [],\r\n\t\t\tcreate: function() {\r\n\t\t\t\tvar def = {\r\n\t\t\t\t\tdesc: $('#def-description').val(),\r\n\t\t\t\t\ttype: $('#def-logtype').val()\r\n\t\t\t\t};\r\n\t\t\t\tvar postData = { definition: def };\r\n\t\t\t\tvar define = $.ajax({\r\n\t\t\t\t\ttype: \"POST\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"definition\",\r\n\t\t\t\t\tdata: JSON.stringify( postData ),\r\n\t\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdefine.done(function(data){\r\n\t\t\t\t\tWorkoutLog.definition.userDefinitions.push(data.definition);\r\n\t\t\t\t\t$(\"#define-success\").fadeIn();\r\n\t\t\t\t\t$('#def-description').val();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdefine.fail(function(err){\r\n\t\t\t\t\tconsole.log('oh no' + JSON.stringify(err));\r\n\t\t\t\t\t$(\"#define-fail\").fadeIn();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tdelete: function(){\r\n\t\t\t\tvar thisDefId = {\r\n\t\t\t\t\tid: $('#log-definition').find('option:selected').val()\r\n\t\t\t\t};\r\n\t\t\t\tvar deleteData = { definition: thisDefId };\r\n\t\t\t\tvar deleteDefinition = $.ajax({\r\n\t\t\t\t\ttype: \"DELETE\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"definition\",\r\n\t\t\t\t\tdata: JSON.stringify(deleteData),\r\n\t\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t\t});\r\n\t\t\t\t$('select option:selected').text(\"\");\r\n\t\t\t\t$('select option:selected').hide();\r\n\r\n\t\t\t\tfor (var i = 0; i < WorkoutLog.definition.userDefinitions.length; i++){\r\n\t\t\t\t\t\tif(WorkoutLog.definition.userDefinitions[i].id == thisDefId.id){\r\n\t\t\t\t\t\tWorkoutLog.definition.userDefinitions.splice(i, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdeleteDefinition.fail(function(){\r\n\t\t\t\t\tconsole.log(\"nope. you didn't delete category.\");\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tfetchAll: function(){\r\n\t\t\t\tvar getDefs = $.ajax({\r\n\t\t\t\t\ttype: 'GET',\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"definition\",\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\"Authorization\": window.localStorage.getItem(\"sessionToken\")\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.done(function(data) {\r\n\t\t\t\t\tWorkoutLog.definition.userDefinitions = data;\r\n\t\t\t\t})\r\n\t\t\t\t.fail(function(err){\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t$('#def-save').on('click', WorkoutLog.definition.create);\r\n\t$(\"#delete-category\").on(\"click\", WorkoutLog.definition.delete);\r\n\t\r\n\tif (window.localStorage.getItem(\"sessionToken\")){\r\n\t\tWorkoutLog.definition.fetchAll();\r\n\t}\r\n});","var index;\r\n$(function(){\r\n\t$('#log-success').hide();\r\n\t$('#log-fail').hide();\r\n\r\n\t$.extend(WorkoutLog,{\r\n\t\tlog: {\r\n\t\t\tworkouts: [],\r\n\t\t\tsetDefinitions: function(){\r\n\t\t\t\tvar defs = WorkoutLog.definition.userDefinitions;\r\n\t\t\t\tvar len = defs.length;\r\n\t\t\t\tvar opts = \"\";\r\n\t\t\t\tfor (var i = 0; i < len; i++){\r\n\t\t\t\t\topts += \"<option value='\" + defs[i].id + \"'>\" + defs[i].description + \"</option>\";\r\n\t\t\t\t}\r\n\t\t\t\t$(\"#log-definition\").children().remove();\r\n\t\t\t\t$(\"#log-definition\").append(opts);\r\n\t\t\t},\r\n\r\n\t\t\tsetHistory: function() {\r\n\t\t\t\tvar history = WorkoutLog.log.workouts;\r\n\t\t\t\tvar len = history.length;\r\n\t\t\t\tvar lis = \"\";\r\n\t\t\t\tfor (var i = 0; i < len; i++) {\r\n\t\t\t\t\tlis += \"<li class='list-group-item'>\" + \r\n\t\t\t\t\t// history[i].id + \" - \" + \r\n\t\t\t\t\thistory[i].def + \" - \" + \r\n\t\t\t\t\thistory[i].result + \" \" +\r\n\t\t\t\t\t// pass the log.id into the button's id attribute // watch your quotes!\r\n\t\t\t\t\t\"<button id='\" + history[i].id + \"' class='remove'><strong>X</strong></button></li>\";\r\n\t\t\t\t}\r\n\t\t\t\t$('#history-list').children().remove();\r\n\t\t\t\t$('#history-list').append(lis);\r\n\t\t\t},\r\n\r\n\t\t\tcreate: function() {\r\n\t\t\t\tvar itsLog = {\r\n\t\t\t\t\tdesc: $(\"#log-description\").val(),\r\n\t\t\t\t\tresult: $(\"#log-result\").val(),\r\n\t\t\t\t\tdef: $(\"#log-definition option:selected\").text()\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar postData = { log: itsLog };\r\n\t\t\t\tvar logger = $.ajax({\r\n\t\t\t\t\ttype: \"POST\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"log\",\r\n\t\t\t\t\tdata: JSON.stringify(postData),\r\n\t\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t\t});\r\n\r\n\t\t\t\tlogger.done(function(data) {\r\n\t\t\t\t\tWorkoutLog.log.workouts.push(data);\r\n\t\t\t\t\t$('#log-success').fadeIn();\r\n\t\t\t\t\t$('#log-result').val(\"\");\r\n\t\t\t\t\t$('#log-description').val(\"\");\r\n\t\t\t\t});\r\n\r\n\t\t\t\tlogger.fail(function() {\r\n\t\t\t\t\tconsole.log(\"something broke\");\r\n\t\t\t\t\t$('#log-fail').fadeIn();\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\r\n\t\t\tdelete: function(){\r\n\t\t\t\tvar thisLog = {\r\n\t\t\t\t\t\t// \"this\" is the button on the li\r\n\t\t\t\t\t\t// .attr(\"id\") targets the value of the id attribute of button\r\n\t\t\t\t\tid: $(this).attr(\"id\")\r\n\t\t\t\t};\r\n\t\t\t\tvar deleteData = { log: thisLog };\r\n\t\t\t\tvar deleteLog = $.ajax({\r\n\t\t\t\t\ttype: \"DELETE\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"log\",\r\n\t\t\t\t\tdata: JSON.stringify(deleteData),\r\n\t\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// removes list item\r\n\t\t\t\t// references button then grabs closest li\r\n\t\t\t\t$(this).closest(\"li\").remove();\r\n\r\n\t\t\t\t// deletes item out of workouts array\r\n\t\t\t\tfor(var i = 0; i < WorkoutLog.log.workouts.length; i++){\r\n\t\t\t\t\tif(WorkoutLog.log.workouts[i].id == thisLog.id){\r\n\t\t\t\t\t\tWorkoutLog.log.workouts.splice(i, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdeleteLog.fail(function(){\r\n\t\t\t\t\tconsole.log(\"nope. you didn't delete it.\");\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tfetchAll: function(){\r\n\t\t\t\tvar fetchDefs = $.ajax({\r\n\t\t\t\t\ttype: \"GET\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"log\",\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\"Authorization\": window.localStorage.getItem(\"sessionToken\")\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tfetchDefs.done(function(data){\r\n\t\t\t\t\tWorkoutLog.log.workouts = data;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tfetchDefs.fail(function(err){\r\n\t\t\t\t\tconsole.log(\"an error occured\" + err.message);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t$('#log-save').on('click', WorkoutLog.log.create);\r\n\r\n\t$(\"#history-list\").delegate('.remove', 'click', WorkoutLog.log.delete);\r\n\tif (window.localStorage.getItem(\"sessionToken\")) {\r\n\t\tWorkoutLog.log.fetchAll();\r\n\t}\r\n\r\n\r\n});","$(function(){\r\n\r\n\t$.extend(WorkoutLog, {\r\n\t\tafterSignin: function(sessionToken) {\r\n\t\t\t// set global auth header authorization with token\r\n\t\t\tWorkoutLog.setAuthHeader(sessionToken);\r\n\t\t\tWorkoutLog.definition.fetchAll();\r\n\t\t\tWorkoutLog.log.fetchAll();\r\n\t\t\tWorkoutLog.fetchAllFeeds();\r\n\t\t\t$(\".disabled\").removeClass(\"disabled\");\r\n\t\t\t// change text of nav bar \"login\" to \"logout\"\r\n\t\t\t$(\"#loginout\").text(\"Logout\");\r\n\t\t},\r\n\r\n\t\tsignup: function(){\r\n\t\t\tvar username = $('#su_username').val();\r\n\t\t\tvar password = $('#su_password').val();\r\n\t\t\tvar user = { \r\n\t\t\t\tuser: {\r\n\t\t\t\t\tusername: username, \r\n\t\t\t\t\tpassword: password \r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar signup = $.ajax({\r\n\t\t\t\ttype: \"POST\",\r\n\t\t\t\turl: WorkoutLog.API_BASE + \"user\",\r\n\t\t\t\tdata: JSON.stringify( user ),\r\n\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t});\r\n\r\n\t\t\tsignup.done(function(data){\r\n\t\t\t\tif (data.sessionToken){\r\n\t\t\t\t\t// WorkoutLog.setAuthHeader(data.sessionToken);\r\n\t\t\t\t\t// WorkoutLog.definition.fetchAll();\r\n\t\t\t\t\t// WorkoutLog.log.fetchAll();\r\n\t\t\t\t\t\r\n\t\t\t\t\t$('#signup-modal').modal('hide');\r\n\t\t\t\t\t// $('.disabled').removeClass('disabled');\r\n\t\t\t\t\t// $('#loginout').text(\"Logout\");\r\n\t\t\t\t}\r\n\t\t\t\t$('.nav-tabs a[href=\"#define\"]').tab('show');\t\r\n\t\t\t}).fail(function(){\r\n\t\t\t\t$('#su_error').text(\"There was an issue with sign up\").show();\r\n\t\t\t});\t\r\n\t\t},\r\n\r\n\t\tlogin: function(){\r\n\t\t\tvar username = $('#li_username').val();\r\n\t\t\tvar password = $('#li_password').val();\r\n\t\t\tvar user = { \r\n\t\t\t\tuser: {\r\n\t\t\t\t\tusername: username, \r\n\t\t\t\t\tpassword: password \r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar login = $.ajax({\r\n\t\t\t\ttype: \"POST\",\r\n\t\t\t\turl: WorkoutLog.API_BASE + \"login\",\r\n\t\t\t\tdata: JSON.stringify( user ),\r\n\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t});\r\n\r\n\t\t\tlogin.done(function(data){\r\n\t\t\t\tif (data.sessionToken){\r\n\t\t\t\t\t// WorkoutLog.setAuthHeader(data.sessionToken);\r\n\t\t\t\t\t// WorkoutLog.definition.fetchAll();\r\n\t\t\t\t\t// WorkoutLog.log.fetchAll();\r\n\t\t\t\t\tWorkoutLog.afterSignin(data.sessionToken);\r\n\t\t\t\t\t$('#login-modal').modal('hide');\r\n\t\t\t\t\t$('.nav-tabs a[href=\"#log\"]').tab('show');\r\n\t\t\t\t\t// shows \"Welcome\" at login and passes text & username\r\n\t\t\t\t\t$(\"#welcome\").show();\r\n\t\t\t\t\t$(\"#welcome\").text(\"Welcome, \" + username);\r\n\t\t\t\t}\t\r\n\r\n\t\t\t}).fail(function(){\r\n\t\t\t\t$('#li_error').text(\"There was an issue with sign up\").show();\r\n\t\t\t});\t\r\n\t\t},\r\n\r\n\t\tloginout: function() {\r\n\t\t\tif (window.localStorage.getItem(\"sessionToken\")) {\r\n\t\t\t\twindow.localStorage.removeItem(\"sessionToken\");\r\n\t\t\t\t$(\"#loginout\").text(\"Login\");\r\n\t\t\t}\r\n\r\n\t\t\t//On logout the buttons don't work\r\n\t\t}\r\n\t});\r\n\t//bind events\r\n\t$(\"#login\").on('click', WorkoutLog.login);\r\n\t$(\"#signup\").on('click', WorkoutLog.signup);\r\n\t$('#loginout').on('click', WorkoutLog.loginout);\r\n\t\r\n\tif (window.localStorage.getItem('sessionToken')) {\r\n\t\t$('#loginout').text('Logout');\r\n\t}\r\n\r\n});\r\n\r\n"],"sourceRoot":"/source/"}